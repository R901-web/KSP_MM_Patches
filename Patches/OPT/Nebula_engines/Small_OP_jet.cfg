PART:NEEDS[OPT,OPT_Reconfig]
{
	//Basics
	name = smallOPjet
	author = me
	module = Part
	scale = 1   // original 1
	rescaleFactor = 0.5 // original 0.5
	MODEL
	{
		model = OPT/Parts/engines/Nebula/model
	}
	
	//Title and description
	title = JX-6372 "Nova" Afterburning Turboramjet
	manufacturer = OPT Aerospace Division
	description = This is an experimental engine designed by OPT Aerospace Division to meet the demands for a compact high-performance turboramjet. With far more thrust than the R.A.P.I.E.R or the Whiplash, this can power large spaceplanes without sacrificing on ISP. Furthermore, it features an afterburner for even more thrust, at the cost of ISP. 
	tags = op jet afterburner plane engine nova
	
	//Size
	bulkheadProfiles = size1
	mass = 1.2
	
	//Unlocking
	category = Engine
	subcategory = 0.0
	TechRequired = aerospaceTech
	cost = 2500
	entryCost = 10000
	
	//Temperature
	skinMaxTemp = 2700
	maxTemp = 2400
	emissiveConstant = 0.85
	heatConductivity = 0.12
	
	//Durability
	crashTolerance = 15
	
	//Attachment
	attachRules = 1,1,0,1,0
	CoMOffset = 0.0, 1.5, 0.0
	node_stack_top = 0.0, 1.03616, 0.0, 0.0, 1.0, 0.0, 2
	
	// Drag
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2
	
	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = Dry
		secondaryEngineID = Wet
		primaryEngineModeDisplayName = Afterurner Idle
		secondaryEngineModeDisplayName = Afterburner Engaged
	}
	
	MODULE
	{
		name = ModuleEnginesFX
		engineID = Dry
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.05
		minThrust = 0
		maxThrust = 100
		heatProduction = 30
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.5
		engineDecelerationSpeed = 0.8
		flameoutEffectName = flameout
		powerEffectName = runing_classic
		engageEffectName = engage
		disengageEffectName = disengage
		spoolEffectName = running_turbine
		engineSpoolIdle = 0.05
		engineSpoolTime = 2.0
		EngineType = Turbine
		exhaustDamageMultiplier = 20
		PROPELLANT
		{
			name = LiquidFuel
			ratio = 1
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			DrawGauge = True
		}
		PROPELLANT
		{
			name = IntakeAir
			ignoreForIsp = True
			ratio = 15
		}
		atmosphereCurve
		{
			key = 0 9000 0 0
		}
		atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		velCurve
		{
			key = 0 1 1.28 1.28
			key = 2.5 4.2 0.64 0.64
			key = 6.25 4.2 -0.52 -0.52
			key = 10 0.3 -1.04 -1.04
		}
		atmCurve
		{
			key = 0 0 
			key = 0.1 0.2
			key = 1 1 
			key = 15 7.5 0 0
		}
	}
	
	MODULE
	{
		name = ModuleEnginesFX
		engineID = Wet
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.05
		minThrust = 0
		maxThrust = 150
		heatProduction = 50
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.2
		engineDecelerationSpeed = 0.4
		flameoutEffectName = flameout
		powerEffectName = running_shrcam
		engageEffectName = engage
		disengageEffectName = disengage
		spoolEffectName = running_turbine
		engineSpoolIdle = 0.05
		engineSpoolTime = 2.0
		EngineType = Turbine
		exhaustDamageMultiplier = 20
		PROPELLANT
		{
			name = LiquidFuel
			ratio = 1
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			DrawGauge = True
		}
		PROPELLANT
		{
			name = IntakeAir
			ignoreForIsp = True
			ratio = 8.75
		}
		atmosphereCurve
		{
			key = 0 4200 0 0
		}
		atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		velCurve
		{
			key = 0 1 1.04 1.04
			key = 2.5 3.6 0.68 0.68
			key = 6.25 4.8 -0.09714283 -0.09714283
			key = 15 0.3 -0.5142857 -0.5142857
		}
		atmCurve
		{
			key = 0 0 
			key = 0.1 0.2
			key = 1 1 
			key = 15 7.5 0 0
		}
	}
	
	MODULE
	{
		name = ModuleAlternator
		RESOURCE
		{
			name = ElectricCharge
			rate = 2.5
		}
	}
	
	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 0
		fxMax = 0.6
		maxDistance = 25
		falloff = 2
		thrustTransformName = thrustTransform
	}
	
	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = nebula_light
		dependOnEngineState = True
		responseSpeed = 0.01
	}
	
	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = nebula_exaust
		gimbalRange = 7.50
		gimbalResponseSpeed = 10
		useGimbalResponseSpeed = true
	}
	
	EFFECTS
	{
		running_turbine
		{
			AUDIO
			{
				channel = Ship
				clip = sound_jet_deep
				volume = 0.0 0.0
				volume = 0.05 0.7
				volume = 1.0 1.0
				volume = 1.5 0.5
				volume = 2.0 0.0
				pitch = 0.5 1.0
				pitch = 1.0 1.4
				loop = true
			}
		}
		runing_classic
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_light
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 1
				localRotation = 1, 0, 0, -90
			}
			MODEL_MULTI_PARTICLE
			{
				name = Spiral
				modelName = OPT_Reconfig/FX2/NebulaASpiral
				localScale = 0.3, 0.3, 0.3
				transformName = FXNode
				emission = 0.05 0
				emission = 0.1 1
				energy = 0 4
				energy = 0.4 1
				localPosition = 0, 0, -0.1
			}
			MODEL_MULTI_PARTICLE
			{
				name = Stream
				modelName = OPT_Reconfig/FX2/NebulaAStream
				localScale = 0.3, 0.3, 0.3
				transformName = FXNode
				emission = 0.05 0
				emission = 0.4 1
				speed = 0.05 0.5
				speed = 0.4 1
				energy = 1 1 0 0
				energy = 1.5 1 0 0
				energy = 2 1.5
				localPosition = 0, 0, -0.1
			}
			MODEL_MULTI_PARTICLE
			{
				name = ShockSteady
				modelName = OPT_Reconfig/FX2/s2ShockSteady
				localScale = 0.3, 0.3, 0.3
				transformName = FXNode
				emission = 0.6 0
				emission = 0.7 1
				speed = 0.6 1.5
				speed = 2 2
				energy = 1.1 0.4
				energy = 2 1
				localPosition = 0, 0, -0.1
			}
		}
		
		running_shrcam
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_light
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 1
				localRotation = 1, 0, 0, -90
			}
			MODEL_MULTI_PARTICLE
			{
				name = Spiral
				modelName = OPT_Reconfig/FX2/NebulaBSpiral
				localScale = 0.3, 0.3, 0.3
				transformName = FXNode
				emission = 0 1
				emission = 0.1 1
				energy = 0 4
				energy = 0.2 1
				localPosition = 0, 0, -0.1
			}
			MODEL_MULTI_PARTICLE
			{
				name = Tail
				modelName = OPT_Reconfig/FX2/NebulaBTail
				localScale = 0.3, 0.3, 0.3
				transformName = FXNode
				emission = 0.05 0
				emission = 0.2 1
				energy = 0 0.2
				energy = 1.5 1.5
			}
			MODEL_MULTI_PARTICLE
			{
				name = Dust
				modelName = OPT_Reconfig/FX2/NebulaBDust
				localScale = 0.3, 0.3, 0.3
				transformName = FXNode
				emission = 0.05 0
				emission = 0.2 1
				energy = 0 0.2
				energy = 0.6 1
				energy = 1.5 2
			}
			MODEL_MULTI_PARTICLE
			{
				name = Shock2
				modelName = OPT_Reconfig/FX2/NebulaBShock
				localScale = 0.3, 0.3, 0.3
				transformName = FXNode
				emission = 0.1 0
				emission = 0.2 1
				energy = 0 0.2
				energy = 1.5 1
				localPosition = 0, 0, -0.1
			}
			AUDIO
			{
				name = ramp
				channel = Ship
				clip = OPT_Reconfig/Sounds/engine_1
				volume = 0.0 0.0
				volume = 0.2 1.5
				volume = 1.2 3
				pitch = 0.0 0.5
				pitch = 0.4 0.7
				pitch = 1.2 1.5
				loop = true
				speed = 0.0 1
				speed = 1.3 3
			}
			AUDIO
			{
				name = scream
				channel = Ship
				clip = OPT_Reconfig/Sounds/engine_2
				volume = 0.0 0
				volume = 0.38 0
				volume = 0.42 1
				volume = 1.2 3
				pitch = 0.5 0.7
				pitch = 1.5 1.8
				loop = true
				speed = 0.0 2.5
				speed = 1.2 3
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_medium
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform
				oneShot = true
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}
}
