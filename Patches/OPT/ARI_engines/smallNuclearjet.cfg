!PART[AAengine]:NEEDS[OPT] {} //ARI175
!PART[arie73]:NEEDS[OPT_Legacy] {} //ARI173

PART:NEEDS[OPT,OPT_Reconfig]
{
	//Basics
	name = nukeJetsmall
	author = me
	module = Part
	scale = 1
	rescaleFactor = 1.0
	MODEL
	{
		model = OPT/Parts/engines/ARI/model
	}
	
	//Descriptions
	title = JX-6154 "Vesper" Nuclear Turbojet  
	manufacturer = OPT Aerospace Division
	description = This is a hybrid dual-mode nuclear jet engine. Meant to be used with SSTOs, it can easily transition from a powerful turbojet to an efficient nuclear engine to reach even the furthest planets through spaceflight. 
	tags = op jet nuclear plane engine vesper dual
	
	//Size
	bulkheadProfiles = size1
	mass = 1.2
	
	//Unlocking
	category = Engine
	subcategory = 0.0
	TechRequired = aerospaceTech
	cost = 2500
	entryCost = 10000
	
	//Temperature
	skinMaxTemp = 2700
	maxTemp = 2400
	emissiveConstant = 0.85
	heatConductivity = 0.12
	
	//Durability
	crashTolerance = 15
	
	//Attachment
	attachRules = 1,1,0,1,0
	node_stack_top = 0.0, 0.68113, 0.0, 0.0, 1.0, 0.0, 2
	
	// Drag
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2
	
	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = AirBreathing
		secondaryEngineID = ClosedCycle
		primaryEngineModeDisplayName = Turbojet
		secondaryEngineModeDisplayName = Nuclear
	}
	
	MODULE
	{
		name = ModuleEnginesFX
		engineID = AirBreathing
		thrustVectorTransformName = thrustTransform
		runningEffectName = powerspool
		FlameoutEffectName = flameout
		engageEffectName = engage
		disengageEffectName = disengage
		exhaustDamage = True
		ignitionThreshold = 0.05
		minThrust = 0
		maxThrust = 100
		heatProduction = 30
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.5
		engineDecelerationSpeed = 0.8
		EngineType = Turbine
		exhaustDamageMultiplier = 15
		PROPELLANT
		{
			name = LiquidFuel
			ratio = 1
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			DrawGauge = True
		}
		PROPELLANT
		{
			name = IntakeAir
			ignoreForIsp = True
			ratio = 7.5
		}
		atmosphereCurve
		{
			key = 0 4500 0 0
		}
		atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		velCurve 
		{
			key = 0 1 1.12 1.12
			key = 1.25 2.4 0.8800001 0.8800001
			key = 3.75 4 0.4266667 0.4266667
			key = 7.5 4.8 -0.05333332 -0.05333332
			key = 15 2.4 -0.32 -0.32
		}
		atmCurve 
		{
			key = 0 0 
			key = 0.1 0.2
			key = 1 1 
			key = 15 7.5 0 0
		}
	}
	MODULE
	{
		name = ModuleEnginesFX
		engineID = ClosedCycle
		thrustVectorTransformName = thrustTransform
		runningEffectName = powersharp
		FlameoutEffectName = flameout
		engageEffectName = engage
		disengageEffectName = disengage
		exhaustDamage = True
		ignitionThreshold = 0.05
		minThrust = 0
		maxThrust = 120
		heatProduction = 30
		EngineType = Nuclear
		PROPELLANT
		{
			name = LiquidFuel
			ratio = 1
			DrawGauge = True
		}
		atmosphereCurve 
		{
			key = 0 900 -360 -360
			key = 1 540 -209.9999 -209.9999
			key = 10 0.001 -59.99989 -59.99989
		}
	}
	
	MODULE
	{
		name = ModuleAlternator
		RESOURCE
		{
			name = ElectricCharge
			rate = 2.5
		}
	}
	
	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = ari_engine
		dependOnEngineState = True
		responseSpeed = 0.04
	}
	
	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = thrustTransform
		gimbalRange = 10.00
		gimbalResponseSpeed = 12.5
		useGimbalResponseSpeed = true
	}
	
	EFFECTS
	{
        powerspool
        {
            MODEL_MULTI_PARTICLE
			{
				name = Lamp1
				modelName = OPT_Reconfig/FX2/ARIJetLamp
				transformName = FXNode
				emission = 0.05 0
				emission = 0.1 1
				energy = 0.1 0.3
				energy = 1 1
			}
			MODEL_MULTI_PARTICLE
			{
				name = Flame1
				modelName = OPT_Reconfig/FX2/ARIRedFlameJet
				transformName = FXNode
				emission = 0.05 0
				emission = 0.5 1
				speed = 0 0.2
				speed = 1 1
			}
            PREFAB_PARTICLE
            {
                name = flamethrust2
                prefabName = fx_smokeTrail_light
                transformName = SmokeTransform
                emission = 0.0 0.0
                emission = 0.05 0.0
                emission = 0.075 0.25
                emission = 1.0 1.25
				emission = 1.7 2
                speed = 0.0 0.25
                speed = 1.0 1.0
            }
			AUDIO
            {
				name = ramp
                channel = Ship
                clip = OPT_Reconfig/Sounds/airplane_Cabin
                volume = 0.0 0.0
				volume = 0.1 1
				pitch = 0.0 0.5
				pitch = 1.0 1.0
                loop = true
                speed = 0.0 1.0
                speed = 1.0 3.0
            }
			AUDIO
			{
				name = flame
				channel = Ship
				clip = OPT_Reconfig/Sounds/RCSnoise_9
				volume = 0.0 0.0
				volume = 0.05 0.6
				volume = 1.0 3.0
				pitch = 1.0 1.0
				pitch = 2.0 1.3
				loop = true
				speed = 0.0 2.0
				speed = 1.0 2.0
			}
        }
		powersharp
        {
            MODEL_MULTI_PARTICLE
			{
				name = Lamp2
				modelName = OPT_Reconfig/FX2/ARIVacLamp
				transformName = FXNode
				emission = 0.05 0
				emission = 0.1 1
				energy = 0.1 0.3
				energy = 1 1
			}
			MODEL_MULTI_PARTICLE
			{
				name = Flame2
				modelName = OPT_Reconfig/FX2/ARIRedFlameVac
				transformName = FXNode
				emission = 0.05 0
				emission = 0.5 1
				speed = 0 0.2
				speed = 1 1
			}
			PREFAB_PARTICLE
            {
                name = flamethrust2
                prefabName = fx_smokeTrail_light
                transformName = SmokeTransform
                emission = 0.0 0.0
                emission = 0.05 0.0
                emission = 0.075 0.25
                emission = 1.0 1.25
				emission = 1.7 2
                speed = 0.0 0.25
                speed = 1.0 1.0
            }
            AUDIO
			{
				name = ramp
				channel = Ship
				clip = OPT_Reconfig/Sounds/airplane_spool_high
				volume = 0.0 0.0
				volume = 0.05 0.4
				volume = 1.0 1.0
				pitch = 0.0 1.3
				pitch = 1.0 1.5
				loop = true
			}
			AUDIO
			{
				name = flame
				channel = Ship
				clip = OPT_Reconfig/Sounds/RCSnoise_9
				volume = 0.0 0.0
				volume = 0.05 0.6
				volume = 1.0 3.0
				pitch = 1.0 1.0
				pitch = 2.0 1.3
				loop = true
				speed = 0.0 2.0
				speed = 1.0 2.0
			}
        }

        engage
        {
            AUDIO
            {
				name = engageengine
                channel = Ship
                clip = sound_vent_soft
                volume = 0.2
                pitch = 0.4
                loop = false
            }
        }

        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 0.1
                pitch = 0.6
                loop = false
				speed = 1 0.2
            }
        }

        flameout
        {
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 0.3
                pitch = 2.0
                loop = false
            }
        }
	}
}